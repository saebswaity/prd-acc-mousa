# وثيقة متطلبات المنتج (PRD) - نظام المحاسبة الديناميكي dynacc.ai

## 1. المقدمة

**dynacc.ai** هو نظام محاسبة سحابي مبتكر مصمم لتوفير حلول محاسبية مخصصة وديناميكية للشركات والمؤسسات بمختلف أحجامها. تكمن الفكرة الأساسية في التخلي عن الأنظمة المحاسبية التقليدية ذات القالب الواحد، وتقديم نظام يمكن "تكوينه" ليتناسب تمامًا مع العمليات التجارية والاحتياجات الفريدة لكل عميل. يتم ذلك عبر مرحلتين: مرحلة التكوين (Setup Phase) التي يقوم بها فريقنا، ومرحلة الاستخدام (Operational Phase) التي يستخدمها العميل في عملياته اليومية.

## 2. المشكلة

الشركات الصغيرة والمتوسطة والكبيرة على حد سواء تعاني من الأنظمة المحاسبية الجاهزة التي تفرض عليها طرق عمل لا تتناسب مع طبيعة نشاطها. هذا يجبر الشركات على:
* القيام بالكثير من العمل اليدوي خارج النظام.
* إنفاق مبالغ طائلة على تخصيص الأنظمة الجاهزة، وهو أمر معقد وغير فعال.
* صعوبة في توليد تقارير مالية دقيقة تعكس حقيقة أداء الشركة.

يهدف **dynacc.ai** لحل هذه المشكلة من خلال تقديم نظام مرن يمكن تشكيله بالكامل حسب متطلبات العميل.

## 3. الأهداف

* **المرونة الكاملة:** بناء نظام يسمح بتعريف هيكل الحسابات، أنواع الحركات التجارية، ومنطقها، والتقارير بشكل مخصص لكل عميل.
* **سهولة الاستخدام:** توفير واجهة مستخدم بسيطة وواضحة للعميل النهائي بعد مرحلة التكوين.
* **قابلية التوسع:** تصميم بنية تحتية قادرة على خدمة عدد كبير من العملاء بنسخهم المخصصة دون التأثير على الأداء.
* **الدقة والموثوقية:** ضمان دقة البيانات والقيود المحاسبية الناتجة عن الحركات التجارية.

## 4. شخصيات المستخدمين (User Personas)

### أ. فريق dynacc.ai (المُكوِّن للنظام)

* **الوصف:** محلل مالي أو محاسب تقني يمتلك فهمًا عميقًا للمحاسبة والقدرة على ترجمة متطلبات العميل إلى تكوين داخل النظام.
* **الاحتياجات:**
    * واجهة تكوين قوية لإنشاء وتعديل شجرة الحسابات.
    * أدوات مرنة لتعريف الحركات التجارية وتحديد أطرافها (الحسابات المدينة والدائنة).
    * محرر منطق (Logic Editor) لبرمجة القواعد الخاصة بكل حركة (مثل حساب الضرائب، الخصومات، الكميات).
    * القدرة على إدارة جميع نسخ العملاء من لوحة تحكم مركزية.

### ب. العميل (المستخدم النهائي)

* **الوصف:** محاسب، مدير مالي، أو صاحب عمل يستخدم النسخة المخصصة من النظام لإدارة الشؤون المالية لشركته.
* **الاحتياجات:**
    * لوحة معلومات (Dashboard) تعرض ملخصًا ماليًا سريعًا.
    * سهولة في إدخال الحركات التجارية اليومية (فواتير بيع، شراء، سندات قبض وصرف).
    * الوصول إلى تقارير مالية محددة مسبقًا (مثل الميزانية، قائمة الدخل، كشف حساب).
    * نظام صلاحيات واضح لإدارة وصول المستخدمين داخل شركته.

## 5. الميزات (Features)

### 5.1. مرحلة التكوين (لصالح فريق dynacc.ai)

* **إدارة الحسابات (Chart of Accounts):**
    * إنشاء شجرة حسابات ديناميكية (أصول، خصوم، إيرادات، مصاريف، ...إلخ).
    * تحديد خصائص كل حساب (اسم، كود، طبيعة الحساب - مدين/دائن، حساب رئيسي/فرعي).
* **إدارة الحركات التجارية (Transaction Types):**
    * إنشاء أنواع جديدة من الحركات (مثل: "فاتورة بيع سيارات"، "إيجار شهري"، "استلام دفعة من عميل").
    * تحديد الحسابات الافتراضية لكل حركة (الحساب المدين والحساب الدائن).
* **محرر المنطق (Logic & Rules Engine):**
    * ربط منطق مخصص بكل حركة تجارية.
    * القدرة على تنفيذ عمليات حسابية (ضرب، جمع، نسبة مئوية) بناءً على مدخلات الحركة.
    * مثال: في حركة "بيع 3 سيارات"، يقوم المنطق بضرب الكمية (3) في سعر السيارة، إضافة ضريبة القيمة المضافة، وتطبيق أي خصومات لإنشاء القيد المحاسبي الصحيح.
* **إدارة العملاء والنسخ:**
    * لوحة تحكم لإدارة جميع نسخ العملاء.
    * تفعيل أو تعطيل نسخة عميل.

### 5.2. مرحلة الاستخدام (لصالح العميل)

* **إدخال القيود والسندات:**
    * واجهة بسيطة لإدخال الحركات التجارية التي تم تكوينها مسبقًا.
    * تعبئة الحقول المطلوبة (مثل: اسم العميل، المبلغ، الكمية، التاريخ).
    * يقوم النظام تلقائيًا بتوليد القيد المحاسبي بناءً على المنطق المحدد مسبقًا.
* **التقارير المالية:**
    * عرض التقارير التي تم تكوينها (كشف حساب، ميزان المراجعة، قائمة الدخل، الميزانية العمومية).
    * إمكانية فلترة التقارير حسب التاريخ أو الحساب.
* **إدارة المستخدمين والصلاحيات:**
    * إنشاء مستخدمين جدد داخل الشركة.
    * تحديد صلاحيات كل مستخدم (عرض، إضافة، تعديل، حذف، موافقة على السندات).
* **إدارة الفروع (اختياري):**
    * القدرة على تعريف فروع متعددة للشركة وفصل بياناتها وتقاريرها.

## 6. وصف الشاشات (UI Screens)

### شاشة فريق dynacc.ai (واجهة التكوين)

1.  **شاشة إدارة الحسابات:**
    * عرض شجري للحسابات.
    * أزرار "إضافة حساب جديد"، "تعديل"، "حذف".
    * نموذج (Form) لإدخال بيانات الحساب (الاسم، الكود، النوع، الحساب الأب).
2.  **شاشة إدارة الحركات التجارية:**
    * قائمة بجميع أنواع الحركات المعرفة.
    * نموذج لإنشاء حركة جديدة وتحديد اسمها والحسابات الافتراضية (المدين والدائن).
    * قسم "محرر المنطق" وهو مساحة نصية أو واجهة رسومية بسيطة لكتابة القواعد الحسابية الخاصة بالحركة.

### شاشة العميل (واجهة الاستخدام)

1.  **لوحة المعلومات الرئيسية (Dashboard):**
    * رسوم بيانية لأهم المؤشرات (مثل: الإيرادات، المصاريف، صافي الربح).
    * اختصارات للحركات الأكثر استخدامًا.
    * جدول بآخر السندات التي تم إدخالها.
2.  **شاشة إدخال حركة جديدة:**
    * قائمة منسدلة لاختيار نوع الحركة (التي تم تعريفها في مرحلة التكوين).
    * حقول ديناميكية تظهر بناءً على نوع الحركة المختار (مثل: حقل "الكمية" و "سعر الوحدة" في فاتورة البيع).
    * زر "حفظ" لتوليد السند والقيد المحاسبي.
3.  **شاشة التقارير:**
    * قائمة بالتقارير المتاحة.
    * فلاتر لتحديد النطاق الزمني (من تاريخ إلى تاريخ) أو حساب معين.
    * عرض التقرير في جدول مع خيارات للطباعة أو التصدير (PDF, Excel).
4.  **شاشة إدارة المستخدمين والصلاحيات:**
    * جدول بالمستخدمين الحاليين.
    * نموذج لإضافة مستخدم جديد وتعيين دوره (مدير، محاسب، مدخل بيانات).
    * مصفوفة صلاحيات لتحديد ما يمكن لكل دور أن يفعله.

## 7. الهيكلية التقنية (System Architecture)

* **قاعدة البيانات:** سيتم الاعتماد على نمط **EAV (Entity-Attribute-Value)** لتصميم قاعدة البيانات. هذا النمط يوفر المرونة اللازمة لتخزين هياكل البيانات المختلفة لكل عميل دون الحاجة لتغيير تصميم الجداول الأساسية.
    * **Entity:** يمثل المكون (مثل: حساب، حركة، سند).
    * **Attribute:** يمثل خاصية للمكون (مثل: اسم الحساب، تاريخ الحركة).
    * **Value:** يمثل قيمة الخاصية.
* **الأداء:** على الرغم من أن نمط EAV قد يكون أبطأ من SQL التقليدي في بعض الحالات، إلا أنه مع الفهرسة الصحيحة وتحديد عدد أقصى من الحقول (Attributes) لكل مكون (20-30)، يمكن الحفاظ على أداء سريع ومقبول.

## 8. مخطط سير العمل (Workflow)

```mermaid
graph TD
    subgraph "مرحلة التكوين (بواسطة فريق dynacc.ai)"
        A[استلام متطلبات العميل] --> B{تحليل المتطلبات};
        B --> C[تصميم شجرة الحسابات];
        B --> D[تحديد أنواع الحركات التجارية];
        C --> E[إدخال الحسابات في النظام];
        D --> F[تعريف الحركات وربطها بالحسابات];
        F --> G[كتابة المنطق والقواعد الحسابية لكل حركة];
        G --> H[إنشاء نسخة خاصة بالعميل: dynacc.ai/companyx];
    end

    subgraph "مرحلة الاستخدام (بواسطة العميل)"
        I[العميل يسجل الدخول إلى نسخته الخاصة] --> J{اختيار حركة تجارية};
        J -- فاتورة بيع --> K[إدخال تفاصيل الفاتورة: كمية، سعر];
        J -- سند قبض --> L[إدخال تفاصيل السند: المبلغ، المصدر];
        K --> M{النظام يطبق المنطق المحدد مسبقًا};
        L --> M;
        M --> N[توليد القيد المحاسبي تلقائيًا];
        N --> O[حفظ السند في قاعدة البيانات];
        I --> P[العميل يطلب تقريرًا ماليًا];
        P --> Q[النظام يجمع البيانات ويولد التقرير];
    end

    H ==> I;